<app-header></app-header>
<div class="register">
  <h1>Create Account</h1>

  <p>There are many advantages to creating an account: the payment process is faster, shipment tracking is possible, and
    much more.</p>
  <form (ngSubmit)="onSubmit()" [formGroup]="myForm">
    @if(warning){
    <p class="warning">Some required fields haven't been entered!</p>
    }@if(userService.userAlreadyExist){
    <p class="warning">User with this email or phone number already exist!</p>
    }
    <div class="content">
      <div class="info">
        <h2>Personal Info (Required*)</h2>
        <label for="firstname">First Name*</label>
        <input type="text" formControlName="firstname" id="firstname">

        <label for="lastname">Last Name*</label>
        <input type="text" formControlName="lastname" id="lastname">

        <label for="phone">Phone Number*</label>
        <input type="number" formControlName="phone">

        <!-- Email Field -->
        <label for="email">Email*</label>
        <input type="email" formControlName="email" />
        <div *ngIf="myForm.get('email')?.invalid && myForm.get('email')?.touched" class="error">
          Enter email properly
        </div>

        <!-- Username Field -->
        <label for="username">Username*</label>
        <input type="text" formControlName="username">
        <div *ngIf="myForm.get('username')?.invalid && myForm.get('username')?.touched" class="error">
          This field is required!
        </div>

        <!-- Password Field -->
        <label for="password">Password*</label>
        <div class="passwordInput">
          <input [type]="showPassword ? 'text' : 'password'" class="password" id="password" formControlName="password">

          <div class="eyes">
            <!-- Closed Eye Icon (Password Hidden) -->
            <img *ngIf="!showPassword" src="eye-close.png" alt="eyes closed image" (click)="togglePasswordVisibility()">

            <!-- Open Eye Icon (Password Visible) -->
            <img *ngIf="showPassword" src="view.svg" alt="eyes opened image" (click)="togglePasswordVisibility()">
          </div>
        </div>
        <div *ngIf="myForm.get('password')?.invalid && myForm.get('password')?.touched" class="error">
          Password length must be a minimum of 10 character!
        </div>
      </div>
      <div class="address">
        <h2>Delivery Info (Optional)</h2>
        <label for="country">Country</label>
        <input type="text" formControlName="country">

        <label for="state">State</label>
        <input type="text" formControlName="state">

        <label for="city">City/Town</label>
        <input type="text" formControlName="city">

        <label for="address">Address</label>
        <input type="text" formControlName="address">

        <label for="postal">Postal Code</label>
        <input type="text" formControlName="postal">
      </div>
    </div>

    <!-- Submit Button (Disabled When Form is Invalid) -->
    <div class="button">
      <p>Your personal data will be used to support your experience throughout this website, to manage access to your
        account, and for other purposes described in our <a href="">Privacy Policy</a>.</p>
      <button type="submit" class="btn">Register</button>
    </div>
  </form>
</div>
<app-footer></app-footer>
